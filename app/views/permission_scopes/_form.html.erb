<%= form_for(@permission_scope, html: { role: :form, data: { controller: "form--toggle" } }) do |f| %>
  <%= render FormErrorsComponent.new(@permission_scope) %>

  <div class="row row-cols-1 row-cols-lg-2 row-gap-4">
    <div class="col">
      <%= render CardComponent.new(extra_classes: "bg-body-tertiary") do |card| %>
        <% card.with_header do %>
          <%= t("show.cards.identification") %>
        <% end %>

        <fieldset class="col-12 ">
          <%= f.label :name, class: "form-label" %>
          <%= f.text_field :name, class: "form-control" %>
        </fieldset>

        <% if false %>
          <fieldset class="col-12 mt-4">
            <%= f.label :role, class: "form-label" %>
            <%= f.select(:role, PermissionScopeDecorator.roles_options_for_select, {}, class: "form-select") %>
          </fieldset>
        <% end %>
      <% end %>

      <%= render CardComponent.new(extra_classes: "bg-body-tertiary mt-4") do |card| %>
        <% card.with_header do %>
          <%= PermissionScope.human_attribute_name(:domaine_ids) %>
        <% end %>

        <fieldset class="col-12">
          <%= f.label :all_domains, class: "form-label" do |translation| %>
            <%= f.checkbox :all_domains,
                           class: "",
                           data: {
                             action: "form--toggle#toggle", form__toggle_target_element_param: "#domaine_ids",
                           } %>
            <%= translation %>
          <% end %>
        </fieldset>

        <fieldset class="<%= class_names("col-12 mt-2 pt-2 border-top border-dashed", "d-none": f.object.all_domains) %>"
                  id="domaine_ids">
          <%= f.label :domaine_ids, class: "form-label" %>
          <%= f.select :domaine_ids,
                       Domaine.sorted.pluck(:name, :id),
                       { include_blank: t(".domaine_ids.blank") },
                       class: "form-select",
                       multiple: true,
                       data: { controller: :select } %>
        </fieldset>
      <% end %>
    </div>
  </div>

  <%= render Form::ActionsComponent.new(f) %>
<% end %>
