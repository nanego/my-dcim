<% view_side = Frame::VIEW_SIDES[:front] if local_assigns[:view_side].blank? %>
<% bg = params[:bg].presence || current_user.visualization_bay_default_background_color \
                             || User::AVAILABLE_BAY_BACKGROUND_COLORS[0] %>

<% if view_side != Frame::VIEW_SIDES[:back] %>
  <!-- Choice of server background color -->
  <div class="btn-group">
    <button type="button"
            class="btn btn-sm btn-secondary dropdown-toggle"
            data-bs-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false">
      <%= t(".background_color", bg: t(".background_choices.#{bg}")) %>
    </button>
    <ul class="dropdown-menu">
      <li><%= link_to Modele.model_name.human,
                      url_for(params.except(:controller, :action)
                                    .permit(:view, :islet, :id, :bg, :format)
                                    .merge({ view: :front, bg: :modele, islet: params[:islet], id: params[:id] })),
                      class: "dropdown-item",
                      remote: true %></li>
      <li><%= link_to Gestion.model_name.human,
                      url_for(params.except(:controller, :action)
                                    .permit(:view, :islet, :id, :bg, :format)
                                    .merge({ view: :front, bg: :gestion, islet: params[:islet], id: params[:id] })),
                      class: "dropdown-item",
                      remote: true %></li>
      <li><%= link_to Cluster.model_name.human,
                      url_for(params.except(:controller, :action)
                                    .permit(:view, :islet, :id, :bg, :format)
                                    .merge({ view: :front, bg: :cluster, islet: params[:islet], id: params[:id] })),
                      class: "dropdown-item",
                      remote: true %></li>
    </ul>
  </div>
<% end %>

<!-- Views FRONT / BACK -->
<% if view_side == Frame::VIEW_SIDES[:both] %>
    <%= content_tag :div, class: "btn btn-sm btn-outline-primary disabled" do %>
    <%= Frame.human_attribute_name("view_sides.both") %>
  <% end %>
<% else %>
  <%= link_to url_for(params.except(:controller, :action)
                            .permit(:view, :islet, :id, :bg, :format)
                            .merge({
                              view: (view_side == Frame::VIEW_SIDES[:back] ? Frame::VIEW_SIDES[:front] : Frame::VIEW_SIDES[:back]),
                              islet: params[:islet],
                              id: params[:id],
                              network_frame_id: params[:network_frame_id]
                            })
                      ),
              class: "btn btn-sm btn-outline-primary align-items-center",
              remote: true do %>
    <span class="bi bi-back" aria-hidden="true"></span>
    <%= Frame.human_attribute_name("view_sides.#{view_side}") %>
  <% end %>
<% end %>

<% if allowed_to?(:sort?, with: ServerPolicy) %>
  <button type="button" class="btn btn-sm btn-outline-primary align-items-center" id="drag-n-drop-switcher">
    <span class="bi bi-arrows-move" aria-hidden="true"></span>
    <%= t(".dragn_drop.enable") %>
  </button>
<% end %>

<%= render CaptionComponent.new do %>
  <h5><%= t(".caption.ports") %> :</h5>
  <dl>
    <dt>
      <span class="pdu port_container unreferenced_client">
        <span class="port portFC empty pe-none">01</span>
      </span>
    </dt>
    <dd><%= t(".caption.unreferenced_client") %></dd>
    <dt>
      <span class="pdu port_container no_client">
        <span class="port portFC empty pe-none">02</span>
      </span>
    </dt>
    <dd><%= t(".caption.no_client") %></dd>
  </dl>
<% end %>
