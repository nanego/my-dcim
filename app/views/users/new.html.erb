<% provide(:title, "Utilisateurs") %>
<%= render 'layouts/breadcrumb', breadcrumb_variables: { 'Utilisateurs' => users_path, 'Ajouter un utilisateur' => '' } %>

<div class="container">

  <h1>Ajouter un utilisateur</h1>

  <%= form_for @user, html: { class: "form-horizontal well", role: "form" }, url: add_user_users_path do |f| %>

    <% if @user.errors.any? %>
      <div class="alert alert-danger alert-dismissable" role="alert">
        <button type="button" class="close" data-dismiss="alert">
          <span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4><%= pluralize(@user.errors.count, "erreur", "erreurs") %> lors de la sauvegarde :</h4>

        <ul>
          <% @user.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label 'Nom', for: :name, class: "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= f.text_field :name, class: "form-control" %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :email, class: "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= f.text_field :email, class: "form-control" %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :role, class: "col-sm-2 control-label" %>
      <div class="col-sm-10">
        <%= f.select(:role, User.roles.keys.map { |role| [role.titleize, role] }, class: "form-control") %>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <%= f.submit 'Valider', class: "btn btn-primary" %>
      </div>
    </div>

  <% end %>

</div>
