<div class="dropdown btn-group btn-group-sm" data-controller="dynamic-export-pdf">
  <button type="button"
          class="btn btn-outline-primary dropdown-toggle d-flex align-items-center export-button"
          data-bs-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false">
    <span class="spinner-border spinner-border-sm flex-shrink-0 d-flex d-none me-2" role="status" aria-hidden="true"
          data-dynamic-export-pdf-target="spinner"></span>
    <span class="text-truncate d-inline-block">
      <%= t("export_button.label") %>
    </span>
  </button>

  <ul class="dropdown-menu dropdown-menu-end">
    <li>
      <h6 class="dropdown-header"><%= t("export_button.exports.pdf") %></h6>
    </li>
    <li>
      <a role="button" class="dropdown-item" data-action="click->dynamic-export-pdf#export" data-dynamic-export-pdf-filename-param="islet-<%= islet.name %>-front"
         data-dynamic-export-pdf-urls-param="<%= islet.print_frames_paths(view: :front).to_json %>">
        <span class="bi bi-file-earmark-pdf" aria-hidden="true"></span>
        <%= t("export_button.faces.front") %>
      </a>
    </li>
    <li>
      <a role="button" class="dropdown-item" data-action="click->dynamic-export-pdf#export" data-dynamic-export-pdf-filename-param="islet-<%= islet.name %>-back"
         data-dynamic-export-pdf-urls-param="<%= islet.print_frames_paths(view: :back).to_json %>">
        <span class="bi bi-file-earmark-pdf" aria-hidden="true"></span>
        <%= t("export_button.faces.back") %>
      </a>
    </li>
    <li>
      <a role="button" class="dropdown-item" data-action="click->dynamic-export-pdf#export" data-dynamic-export-pdf-filename-param="islet-<%= islet.name %>-front_wiring"
         data-dynamic-export-pdf-urls-param="<%= islet.print_frames_paths(view: :front, bg: :wiring).to_json %>">
        <span class="bi bi-file-earmark-pdf" aria-hidden="true"></span>
        <%= t("export_button.faces.front_wiring") %>
      </a>
    </li>
    <li>
      <a role="button" class="dropdown-item" data-action="click->dynamic-export-pdf#export" data-dynamic-export-pdf-filename-param="islet-<%= islet.name %>-back_wiring"
         data-dynamic-export-pdf-urls-param="<%= islet.print_frames_paths(view: :back, bg: :wiring).to_json %>">
        <span class="bi bi-file-earmark-pdf" aria-hidden="true"></span>
        <%= t("export_button.faces.back_wiring") %>
      </a>
    </li>

    <li><hr class="dropdown-divider"></li>

    <li>
      <%= link_to islet_path(islet, format: :txt, view: "", bg: ""),
                  class: "dropdown-item",
                  data: { turbo_frame: :_top } do %>
        <span class="bi bi-file-earmark-text" aria-hidden="true"></span>
        <%= t("export_button.exports.txt") %>
      <% end %>
    </li>

    <% if allowed_to?(:print?, islet) %>
      <li>
        <%= link_to print_islet_path(islet), class: "dropdown-item", target: :_blank do %>
          <span class="bi bi-printer" aria-hidden="true"></span>
          <%= t("export_button.exports.print") %>
        <% end %>
      </li>
    <% end %>

    <% if allowed_to?(:index?, with: PortPolicy) %>
      <li><hr class="dropdown-divider"></li>

      <li>
        <%= link_to ports_path(room_id: islet.room.id, islet: islet.name), class: "dropdown-item", data: { turbo_frame: :_top } do %>
          <span class="bi bi-card-list" aria-hidden="true"></span>
          <%= t("export_button.port_list") %>
        <% end %>
      </li>
    <% end %>
  </ul>
</div>
