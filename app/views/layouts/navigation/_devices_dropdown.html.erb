<li class="nav-item dropdown" role="menuitem">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown"
    aria-expanded="false">
    <%= t(".equipments") %>
  </a>
  <ul class="dropdown-menu">
    <li><%= link_to t(".search_equipment"), servers_grids_path, class: "dropdown-item" %></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header"><%= t(".filter_by") %></h6></li>
    <li class="nav-item dropdown-submenu" role="menuitem">
      <a href="#" class="dropdown-toggle dropdown-item" data-toggle="dropdown" role="button" aria-haspopup="true"
        aria-expanded="false">
        <%= Gestion.model_name.human %>
      </a>
      <ul class="dropdown-menu">
        <% Gestion.order(Gestion.arel_table[:name].lower).each do |c| %>
          <li>
            <%= link_to c.name,
                        overview_rooms_path(gestion_id: c.id, view: params[:view], bg: (params[:bg] || "modele") ),
                        class: class_names("dropdown-item", active: params[:gestion_id] == c.id.to_s) %>
          </li>
        <% end %>
      </ul>
    </li>
    <li class="nav-item dropdown-submenu" role="menuitem">
      <a href="#" class="dropdown-toggle dropdown-item" data-toggle="dropdown" role="button" aria-haspopup="true"
        aria-expanded="false">
        <%= Cluster.model_name.human %>
      </a>
      <ul class="dropdown-menu">
        <li>
          <div class="row" style="width: 600px;">
            <% Cluster.order(Cluster.arel_table[:name].lower).in_groups(3).each do |clusters| %>
                <ul class="list-unstyled col-md-4">
                  <% clusters.each do |c| %>
                      <% if c.present? %>
                        <li>
                            <%= link_to c.to_s,
                                        overview_rooms_path(cluster_id: c.id,
                                                            view: params[:view],
                                                            bg: (params[:bg] || "modele") ),
                                       class: class_names("dropdown-item", active: params[:cluster_id] == c.id.to_s) %>
                          </li>
                      <% end %>
                  <% end %>
                </ul>
            <% end %>
          </div>
        </li>
      </ul>
    </li>
    <li class="nav-item dropdown-submenu" role="menuitem">
      <a href="#" class="dropdown-toggle dropdown-item" data-toggle="dropdown" role="button" aria-haspopup="true"
        aria-expanded="false">
        <%= Modele.model_name.human %>
      </a>
      <ul class="dropdown-menu">
        <li>
          <div>
            <ul style="width:860px;max-height: 600px;overflow: auto;display: flex;flex-direction: column;flex-wrap: wrap;"
                class="list-unstyled modeles">
              <% Modele.all_sorted_with_servers.each do |modele| %>
                <li>
                  <%= link_to modele.name_with_brand,
                              overview_rooms_path(modele_id: modele.id,
                                                  view: params[:view],
                                                  bg: (params[:bg] || "modele")),
                             class: class_names("dropdown-item", active: params[:modele_id] == modele.id.to_s) %>
                </li>
              <% end %>
            </ul>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</li>
